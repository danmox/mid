#!/usr/bin/env python3

import rospy
from geometry_msgs.msg import PoseStamped


def main():
    rospy.init_node('static_pose_publisher')

    required_params = ['~x', '~y']
    params = {}
    for param in required_params:
        if rospy.has_param(param):
            params[param[1:]] = rospy.get_param(param)
        else:
            rospy.logfatal(f'failed to fetch required param: {param}')
            return

    pose_pub = rospy.Publisher('pose', PoseStamped, queue_size=1)

    msg = PoseStamped()
    msg.header.frame_id = 'world'
    msg.pose.position.x = params['x']
    msg.pose.position.y = params['y']
    msg.pose.orientation.w = 1.0

    loop_rate = rospy.Rate(10)
    while not rospy.is_shutdown():
        msg.header.stamp = rospy.get_rostime()
        pose_pub.publish(msg)
        loop_rate.sleep()


if __name__ == '__main__':
    try:
        main()
    except rospy.ROSInterruptException:
        pass
