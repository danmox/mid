<launch>

  <arg name="id"/>
  <arg name="type"/>
  <arg name="map_frame"/>
  <arg name="gdb"/>

  <!-- constructed args -->

  <arg name="task" value="true" if="$(eval arg('type') == 'task')"/>
  <arg name="task" value="false" unless="$(eval arg('type') == 'task')"/>
  <arg name="mid"  value="true" if="$(eval arg('type') == 'mid')"/>
  <arg name="mid"  value="false" unless="$(eval arg('type') == 'mid')"/>

  <arg name="launch_prefix" value="alacritty -e gdb -q -ex run --args" if="$(arg gdb)"/>
  <arg name="launch_prefix" value="" unless="$(arg gdb)"/>

  <!-- nodes -->

  <node name="frontier_exploration_node"
        pkg="frontier_exploration"
        type="frontier_exploration"
        output="screen"
        launch-prefix="$(arg launch_prefix)"
        if="$(arg task)">
    <param name="node_id"        value="$(arg id)"/>
    <param name="map_frame_id"   value="$(arg map_frame)"/>
    <param name="frontier_topic" value="/scarab*/frontiers"/>
    <param name="goal_topic"     value="/scarab*/goals"/>
    <rosparam>
      frontier_threshold:   15
      free_dilation_steps:   2
      occ_dilation_steps:    3
      banned_threshold:    0.5
      goal_threshold:      5.0
    </rosparam>
  </node>

  <node name="mid_planner"
        pkg="or_planner"
        type="or_planner_node"
        output="screen"
        launch-prefix="$(arg launch_prefix)"
        if="$(arg mid)">
    <param name="robot_type" value="$(arg type)"/>
    <param name="node_id"    value="$(arg id)"/>
    <param name="nav_frame"  value="$(arg map_frame)"/>
    <rosparam>
      goal_threshold:      1.5
      gradient_threshold: 1e-8
    </rosparam>
    <remap from="status" to="/network_state"/>
  </node>

</launch>
